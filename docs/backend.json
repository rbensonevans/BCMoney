
{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile information.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user profile."
        },
        "firstName": {
          "type": "string",
          "description": "User's first name."
        },
        "middleName": {
          "type": "string",
          "description": "User's middle name."
        },
        "lastName": {
          "type": "string",
          "description": "User's last name."
        },
        "address": {
          "type": "string",
          "description": "User's physical address."
        },
        "phoneNumber": {
          "type": "string",
          "description": "User's phone number."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "photoUrl": {
          "type": "string",
          "description": "URL of the user's profile photo.",
          "format": "uri"
        },
        "watchlist": {
          "type": "array",
          "description": "List of token IDs the user is tracking.",
          "items": {
            "type": "string"
          }
        },
        "ownedTokens": {
          "type": "array",
          "description": "List of token IDs the user has added to their collection.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email"
      ]
    },
    "TokenBalance": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "TokenBalance",
      "type": "object",
      "description": "Represents the balance of a specific token for a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "The token ID."
        },
        "tokenId": {
          "type": "string",
          "description": "The token ID."
        },
        "balance": {
          "type": "number",
          "description": "The current balance of this token."
        }
      },
      "required": [
        "id",
        "tokenId",
        "balance"
      ]
    },
    "Account": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Account",
      "type": "object",
      "description": "Represents a user's account, linking it to a unique name and Ethereum address.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the account."
        },
        "userProfileId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:1 Account)"
        },
        "uniqueName": {
          "type": "string",
          "description": "A unique name chosen by the user for their account."
        },
        "ethereumAddress": {
          "type": "string",
          "description": "The user's Ethereum public address."
        },
        "balance": {
          "type": "number",
          "description": "The current balance of the account."
        }
      },
      "required": [
        "id",
        "userProfileId",
        "uniqueName",
        "ethereumAddress",
        "balance"
      ]
    },
    "Transaction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Transaction",
      "type": "object",
      "description": "Represents a financial transaction.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the transaction."
        },
        "accountId": {
          "type": "string",
          "description": "Reference to Account. (Relationship: Account 1:N Transaction)"
        },
        "transactionDate": {
          "type": "string",
          "description": "Date and time of the transaction.",
          "format": "date-time"
        },
        "amount": {
          "type": "number",
          "description": "The amount of the transaction."
        },
        "transactionType": {
          "type": "string",
          "description": "The type of transaction, e.g., 'deposit', 'withdrawal', 'send'."
        },
        "recipientAccountId": {
          "type": "string",
          "description": "Reference to recipient Account (if applicable). (Relationship: Account 1:N Transaction, optional recipient)",
          "format": "uuid"
        }
      },
      "required": [
        "id",
        "accountId",
        "transactionDate",
        "amount",
        "transactionType"
      ]
    },
    "Recipient": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Recipient",
      "type": "object",
      "description": "Represents a recipient in one of the user's lists (Family, Friends, General).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the recipient."
        },
        "userProfileId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N Recipient)"
        },
        "name": {
          "type": "string",
          "description": "Name of the recipient."
        },
        "ethereumAddress": {
          "type": "string",
          "description": "Ethereum address of the recipient."
        },
        "listType": {
          "type": "string",
          "description": "The list type the recipient belongs to: 'Family', 'Friends', or 'General'."
        }
      },
      "required": [
        "id",
        "userProfileId",
        "name",
        "ethereumAddress",
        "listType"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/user_profiles/{userProfileId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile information. The 'userProfileId' MUST match the Firebase auth 'uid'.",
          "params": [
            {
              "name": "userProfileId",
              "description": "The unique ID of the user profile, matching the Firebase auth 'uid'."
            }
          ]
        }
      },
      {
        "path": "/user_profiles/{userProfileId}/balances/{tokenId}",
        "definition": {
          "entityName": "TokenBalance",
          "schema": {
            "$ref": "#/backend/entities/TokenBalance"
          },
          "description": "Stores individual token balances for a user profile.",
          "params": [
            {
              "name": "userProfileId",
              "description": "The unique ID of the user profile."
            },
            {
              "name": "tokenId",
              "description": "The unique ID of the token."
            }
          ]
        }
      },
      {
        "path": "/accounts/{accountId}",
        "definition": {
          "entityName": "Account",
          "schema": {
            "$ref": "#/backend/entities/Account"
          },
          "description": "Stores user account information. Includes denormalized 'userProfileId' for authorization independence.",
          "params": [
            {
              "name": "accountId",
              "description": "The unique ID of the user account."
            }
          ]
        }
      },
      {
        "path": "/accounts/{accountId}/transactions/{transactionId}",
        "definition": {
          "entityName": "Transaction",
          "schema": {
            "$ref": "#/backend/entities/Transaction"
          },
          "description": "Stores transaction history for a specific account. Includes denormalized 'accountId' for authorization independence.",
          "params": [
            {
              "name": "accountId",
              "description": "The unique ID of the user account."
            },
            {
              "name": "transactionId",
              "description": "The unique ID of the transaction."
            }
          ]
        }
      },
      {
        "path": "/user_profiles/{userProfileId}/recipients/{recipientId}",
        "definition": {
          "entityName": "Recipient",
          "schema": {
            "$ref": "#/backend/entities/Recipient"
          },
          "description": "Stores recipient information for a specific user. Includes denormalized 'userProfileId' for authorization independence.",
          "params": [
            {
              "name": "userProfileId",
              "description": "The unique ID of the user profile."
            },
            {
              "name": "recipientId",
              "description": "The unique ID of the recipient."
            }
          ]
        }
      }
    ]
  }
}
