
{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile information.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user profile."
        },
        "firstName": {
          "type": "string",
          "description": "User's first name."
        },
        "middleName": {
          "type": "string",
          "description": "User's middle name."
        },
        "lastName": {
          "type": "string",
          "description": "User's last name."
        },
        "address": {
          "type": "string",
          "description": "User's physical address."
        },
        "phoneNumber": {
          "type": "string",
          "description": "User's phone number."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "photoUrl": {
          "type": "string",
          "description": "URL of the user's profile photo.",
          "format": "uri"
        },
        "watchlist": {
          "type": "array",
          "description": "List of token IDs the user is tracking.",
          "items": {
            "type": "string"
          }
        },
        "ownedTokens": {
          "type": "array",
          "description": "List of token IDs the user has added to their collection.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email"
      ]
    },
    "TokenBalance": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "TokenBalance",
      "type": "object",
      "description": "Represents the balance of a specific token for a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "The token ID (serves as document ID)."
        },
        "tokenId": {
          "type": "string",
          "description": "The token ID."
        },
        "userProfileId": {
          "type": "string",
          "description": "The ID of the user who owns this balance."
        },
        "tokenSymbol": {
          "type": "string",
          "description": "The symbol of the token (e.g., BTC)."
        },
        "tokenName": {
          "type": "string",
          "description": "The full name of the token (e.g., Bitcoin)."
        },
        "balance": {
          "type": "number",
          "description": "The current balance of this token."
        },
        "ethereumAddress": {
          "type": "string",
          "description": "The specific public address for this token for this user."
        }
      },
      "required": [
        "id",
        "tokenId",
        "userProfileId",
        "tokenSymbol",
        "tokenName",
        "balance"
      ]
    },
    "Account": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Account",
      "type": "object",
      "description": "Represents a user's account, linking it to a unique name and Ethereum address.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the account."
        },
        "userProfileId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:1 Account)"
        },
        "uniqueName": {
          "type": "string",
          "description": "A unique name chosen by the user for their account."
        },
        "ethereumAddress": {
          "type": "string",
          "description": "The user's Ethereum public address (primary/default)."
        },
        "balance": {
          "type": "number",
          "description": "The current base balance of the account (USD equivalent)."
        }
      },
      "required": [
        "id",
        "userProfileId",
        "uniqueName",
        "ethereumAddress",
        "balance"
      ]
    },
    "Transaction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Transaction",
      "type": "object",
      "description": "Represents a financial transaction.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the transaction."
        },
        "accountId": {
          "type": "string",
          "description": "Reference to Account. (Relationship: Account 1:N Transaction)"
        },
        "transactionDate": {
          "type": "string",
          "description": "Date and time of the transaction.",
          "format": "date-time"
        },
        "amount": {
          "type": "number",
          "description": "The amount of the transaction."
        },
        "transactionType": {
          "type": "string",
          "description": "The type of transaction, e.g., 'deposit', 'withdrawal', 'send', 'trade'."
        },
        "tokenSymbol": {
          "type": "string",
          "description": "Symbol of the token involved in the transaction."
        },
        "recipientAccountId": {
          "type": "string",
          "description": "Reference to recipient Account (if applicable).",
          "format": "uuid"
        }
      },
      "required": [
        "id",
        "accountId",
        "transactionDate",
        "amount",
        "transactionType",
        "tokenSymbol"
      ]
    },
    "Recipient": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Recipient",
      "type": "object",
      "description": "Represents a recipient in one of the user's lists (Family, Friends, General).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the recipient."
        },
        "userProfileId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N Recipient)"
        },
        "name": {
          "type": "string",
          "description": "Name of the recipient."
        },
        "ethereumAddress": {
          "type": "string",
          "description": "Ethereum address or handle of the recipient."
        },
        "listType": {
          "type": "string",
          "description": "The list type the recipient belongs to: 'family', 'friends', or 'general'."
        }
      },
      "required": [
        "id",
        "userProfileId",
        "name",
        "ethereumAddress",
        "listType"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/user_profiles/{userProfileId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile information. The 'userProfileId' MUST match the Firebase auth 'uid'."
        }
      },
      {
        "path": "/user_profiles/{userProfileId}/balances/{tokenId}",
        "definition": {
          "entityName": "TokenBalance",
          "schema": {
            "$ref": "#/backend/entities/TokenBalance"
          },
          "description": "Stores individual token balances for a user profile."
        }
      },
      {
        "path": "/accounts/{accountId}",
        "definition": {
          "entityName": "Account",
          "schema": {
            "$ref": "#/backend/entities/Account"
          },
          "description": "Stores user account identity (handle, eth address, base balance)."
        }
      },
      {
        "path": "/accounts/{accountId}/transactions/{transactionId}",
        "definition": {
          "entityName": "Transaction",
          "schema": {
            "$ref": "#/backend/entities/Transaction"
          },
          "description": "Stores transaction history for a specific account."
        }
      },
      {
        "path": "/user_profiles/{userProfileId}/recipients/{recipientId}",
        "definition": {
          "entityName": "Recipient",
          "schema": {
            "$ref": "#/backend/entities/Recipient"
          },
          "description": "Stores recipient information for a specific user."
        }
      }
    ]
  }
}
